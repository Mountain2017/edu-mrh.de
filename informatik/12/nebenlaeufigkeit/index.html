<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernpfad: Parallele Prozesse & Synchronisation</title>
    <link rel="stylesheet" href="https://edu-mrh.de/embed/style.css">
    <!-- Online IDE Embedded -->
    <link rel="stylesheet" type="text/css" href="https://edu-mrh.de/embed/include/online-ide-embedded.css">
    <script type="module" crossorigin src="https://edu-mrh.de/embed/include/online-ide-embedded.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <span class="icon">âš¡</span>
                <span>Parallele Prozesse</span>
            </div>
            <div class="nav-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="nav-links">
                <a href="https://edu-mrh.de/informatik/informatik.html#jahrgang-12" class="btn btn-outline">ZurÃ¼ck zur Ãœbersicht</a>
                <a href="https://edu-mrh.de/contribute.html#impressum" class="btn btn-outline">Impressum</a>
            </div>
            
        </div>
    </nav>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Kapitel</h3>
            <button class="sidebar-toggle" id="sidebarToggle">âœ•</button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="#intro" data-chapter="0">ğŸ“‹ Ãœbersicht</a></li>
            <li><a href="#chapter1" data-chapter="1">ğŸš€ EinfÃ¼hrung & Grundbegriffe</a></li>
            <li><a href="#chapter2" data-chapter="2">âš™ï¸ Tasks & Threads</a></li>
            <li><a href="#chapter3" data-chapter="3">ğŸ”„ Synchronisation & Konflikte</a></li>
            <li><a href="#chapter4" data-chapter="4">ğŸ Ãœbungen mit MultiKara</a></li>
            <li><a href="#chapter5" data-chapter="5">â˜• NebenlÃ¤ufigkeit in Java</a></li>
        </ul>
    </aside>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Intro Section -->
            <section id="intro" class="content-section active">
                <div class="hero">
                    <h1 class="hero-title">Parallele Prozesse</h1>
                    <p class="hero-subtitle">Concurrent Programming</p>
                    <p class="hero-description">Eine Unterrichtseinheit fÃ¼r die 12. Klasse Informatik</p>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-icon">ğŸ¯</div>
                        <h3>Ziele</h3>
                        <ul>
                            <li>Grundlagen paralleler Prozesse verstehen</li>
                            <li>Synchronisation und Kommunikation von Prozessen</li>
                            <li>Probleme erkennen und lÃ¶sen (Deadlocks)</li>
                            <li>Eigene nebenlÃ¤ufige Programme entwickeln</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">ğŸ‘¥</div>
                        <h3>Zielgruppe</h3>
                        <p><strong>12. Klasse Informatik</strong> (Oberstufe)</p>
                        <p class="mt-2"><strong>Umfang:</strong> 4-8 Unterrichtsstunden</p>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">ğŸ“š</div>
                        <h3>Vorkenntnisse</h3>
                        <p>Hilfreich, aber nicht notwendig:</p>
                        <ul>
                            <li>Endliche Automaten</li>
                            <li>Lernumgebung Kara (ETH ZÃ¼rich)</li>
                        </ul>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-primary" onclick="navigateToChapter(1)">
                        Los geht's â†’
                    </button>
                </div>
            </section>

            <!-- Chapter 1: EinfÃ¼hrung -->
            <section id="chapter1" class="content-section">
                <div class="chapter-header">
                    <span class="chapter-number">Kapitel 1</span>
                    <h2>EinfÃ¼hrung und Grundbegriffe</h2>
                </div>

                <div class="pdf-download-box">
                    <div class="pdf-icon">ğŸ“„</div>
                    <div class="pdf-content">
                        <h3>ğŸ“š Arbeitsunterlagen</h3>
                        <p>Bitte bearbeitet das folgende Aufgabenblatt:</p>
                        <a href="4-1 Tasks und Threads.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-primary" style="display: inline-block; margin-top: 1rem;">
                            â¬‡ï¸ PDF herunterladen: 4-1 Tasks und Threads.pdf
                        </a>
                    </div>
                </div>

                <div class="example-box">
                    <h3>ğŸ³ Beispiel 1: Sepp und Max im Stress</h3>
                    <div class="example-content">
                        <p><strong>Max</strong> kocht ein Dreiminuten-Ei, wÃ¤scht Salat, lÃ¤sst den Pizza-Teig aufgehen und schlÃ¤gt Rahm fÃ¼r die Creme zum Dessert.</p>
                        <p><strong>Sepp</strong> schneidet Zwiebeln, um sie spÃ¤ter anzudÃ¤mpfen, siedet Tomaten, damit sie sich hÃ¤uten, kocht Reis und muss aufpassen, dass der Zucker, den er fÃ¼r ein Karamell-TÃ¶pfchen einkocht, nicht anbrennt.</p>
                        <p class="highlight">Ganz schÃ¶n stressig fÃ¼r die beiden! Zum GlÃ¼ck hat jeder seinen eigenen Arbeitsplatz, so kommen sie sich nicht gegenseitig in die Quere.</p>
                    </div>
                </div>

                <div class="task-box">
                    <h4>ğŸ“ ArbeitsauftrÃ¤ge</h4>
                    <ol>
                        <li>Inwiefern arbeiten Sepp und Max gleichzeitig und unabhÃ¤ngig voneinander? Inwiefern kann man von zweierlei Arten der Gleichzeitigkeit sprechen?</li>
                        <li>Nenne weitere Beispiele gleichzeitig ablaufender Alltagsprozesse.</li>
                        <li>Gib Beispiele fÃ¼r Gleichzeitigkeit bei der Computernutzung an.</li>
                    </ol>
                    <button class="btn btn-secondary" onclick="toggleSolution('solution1')">LÃ¶sung anzeigen</button>
                </div>

                <div id="solution1" class="solution-box hidden">
                    <h4>âœ… LÃ¶sung</h4>
                    <p><strong>Zu 1:</strong> Max und Sepp arbeiten zur selben Zeit im selben Raum, kommen sich jedoch dank getrennter ArbeitsplÃ¤tze gegenseitig nicht in die Quere. Jeder kocht seine eigenen Gerichte, es gibt keine Zusammenarbeit.</p>
                    <p><strong>Zwei Arten von Gleichzeitigkeit:</strong></p>
                    <ul>
                        <li>Die KÃ¶che arbeiten gleichzeitig jeder fÃ¼r sich</li>
                        <li>Jeder der KÃ¶che fÃ¼hrt gleichzeitig mehrere Arbeiten durch</li>
                    </ul>
                    
                    <p><strong>Zu 2: Beispiele aus dem Alltag:</strong></p>
                    <ul>
                        <li>Essen: Hans trinkt aus seiner Tasse, Johanna isst ihr Honigbrot</li>
                        <li>Verkehr: Heinz fÃ¤hrt von A nach B, Hanna fÃ¤hrt von A nach C</li>
                        <li>Party: Peter und Hans wollen mit Susi tanzen</li>
                        <li>Flughafen: Starten und Landen mehrerer Flugzeuge, Betanken, Be- und Entladen</li>
                    </ul>

                    <p><strong>Zu 3: Beispiele bei der Computernutzung:</strong></p>
                    <ul>
                        <li>Mehrere Dokumente ausdrucken und dabei weiterarbeiten</li>
                        <li>Im Hintergrund arbeitender Virenscanner</li>
                        <li>Surfen und gleichzeitig Downloads durchfÃ¼hren</li>
                        <li>Musikdateien brennen und anhÃ¶ren</li>
                        <li>DVD abspielen (DVD auslesen, Bild und Ton wiedergeben)</li>
                        <li>Filme im Internet ansehen (gleichzeitiges Laden und Abspielen)</li>
                        <li>Gleichzeitige Bestellung mehrerer Kunden bei einem Internet-Shop</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3>ğŸ’¡ Merkzettel: NebenlÃ¤ufigkeit</h3>
                    <div class="definition">
                        <p><strong>NebenlÃ¤ufigkeit</strong> (engl. concurrency = Gleichzeitigkeit):</p>
                        <p>Mehrere VorgÃ¤nge, Objekte oder Prozesse heiÃŸen <strong>nebenlÃ¤ufig</strong>, wenn sie voneinander unabhÃ¤ngig bearbeitet werden kÃ¶nnen.</p>
                    </div>
                    <ul class="concept-list">
                        <li>Zentrale, moderne Programmiertechnik der Informatik</li>
                        <li><strong>Spezialfall:</strong> Parallele Verarbeitung</li>
                        <li><strong>Parallele Prozesse</strong> = nebenlÃ¤ufige Prozesse, die gleichzeitig in einem Computersystem ablaufen</li>
                        <li class="highlight-item">parallel = nebenlÃ¤ufig + gleichzeitig!</li>
                        <li><strong>Gegenteil:</strong> Sequentielle Verarbeitung (nacheinander)</li>
                    </ul>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-outline" onclick="navigateToChapter(0)">â† ZurÃ¼ck</button>
                    <button class="btn btn-primary" onclick="navigateToChapter(2)">Weiter â†’</button>
                </div>
            </section>

            <!-- Chapter 2: Tasks & Threads -->
            <section id="chapter2" class="content-section">
                <div class="chapter-header">
                    <span class="chapter-number">Kapitel 2</span>
                    <h2>Tasks und Threads</h2>
                </div>

                <div class="concept-box">
                    <h3>ğŸ’¡ Zwei Arten von Gleichzeitigkeit</h3>
                    <p>Wie bei unserem EinfÃ¼hrungsbeispiel existieren auch in Computersystemen zwei Arten von Gleichzeitigkeit:</p>
                    
                    <div class="comparison-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Beispiel</th>
                                    <th>TASK (Prozess)</th>
                                    <th>THREAD (Faden)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Kochen</strong></td>
                                    <td>Gesamte Arbeit eines Koches</td>
                                    <td>Einzelne TÃ¤tigkeit eines Koches</td>
                                </tr>
                                <tr>
                                    <td><strong>Computer</strong></td>
                                    <td>Gesamtes gestartetes Programm</td>
                                    <td>NebenlÃ¤ufige Sequenz eines Programms</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="definition-grid">
                    <div class="definition-card">
                        <div class="def-icon">ğŸ“¦</div>
                        <h4>TASK (Prozess)</h4>
                        <p>Ein <strong>Task</strong> ist ein vollstÃ¤ndiger, unabhÃ¤ngiger Prozess mit eigenem Speicherbereich.</p>
                        <ul>
                            <li>Eigener Adressraum</li>
                            <li>UnabhÃ¤ngige AusfÃ¼hrung</li>
                            <li>Kommunikation Ã¼ber IPC (Inter-Process Communication)</li>
                        </ul>
                    </div>

                    <div class="definition-card">
                        <div class="def-icon">ğŸ§µ</div>
                        <h4>THREAD (Faden)</h4>
                        <p>Ein <strong>Thread</strong> ist ein Ablauffaden innerhalb eines Prozesses mit Zugriff auf den gleichen Speicherbereich.</p>
                        <ul>
                            <li>Gemeinsamer Speicher mit anderen Threads</li>
                            <li>Leichtgewichtig (weniger Overhead)</li>
                            <li>Direkte Kommunikation mÃ¶glich</li>
                        </ul>
                    </div>
                </div>

                <div class="terminology-box">
                    <h3>ğŸ“š Wichtige Begriffe</h3>
                    
                    <div class="term">
                        <strong>NebenlÃ¤ufigkeit (Concurrency)</strong>
                        <p>Mehrere Aufgaben werden scheinbar gleichzeitig bearbeitet (durch schnelles Umschalten)</p>
                    </div>

                    <div class="term">
                        <strong>Parallelverarbeitung (Parallelism)</strong>
                        <p>Mehrere Aufgaben werden tatsÃ¤chlich gleichzeitig auf verschiedenen Prozessorkernen ausgefÃ¼hrt</p>
                    </div>

                    <div class="term">
                        <strong>MultiTasking</strong>
                        <p>Mehrere Tasks (Prozesse) laufen quasi-parallel auf einem System</p>
                    </div>

                    <div class="term">
                        <strong>MultiThreading</strong>
                        <p>Mehrere Threads innerhalb eines Prozesses laufen quasi-parallel</p>
                    </div>
                </div>

                <div class="example-box">
                    <h3>ğŸ” Weitere Beispiele</h3>
                    
                    <div class="example-item">
                        <h4>Webbrowser</h4>
                        <p><strong>Task:</strong> Der gesamte Browser-Prozess</p>
                        <p><strong>Threads:</strong></p>
                        <ul>
                            <li>UI-Thread (BenutzeroberflÃ¤che)</li>
                            <li>Netzwerk-Thread (Downloads)</li>
                            <li>Rendering-Thread (Seitendarstellung)</li>
                            <li>JavaScript-Thread</li>
                        </ul>
                    </div>

                    <div class="example-item">
                        <h4>Textverarbeitung</h4>
                        <p><strong>Task:</strong> Das Textverarbeitungsprogramm</p>
                        <p><strong>Threads:</strong></p>
                        <ul>
                            <li>Eingabe-Thread (Tastatur)</li>
                            <li>RechtschreibprÃ¼fung-Thread</li>
                            <li>Autospeichern-Thread</li>
                            <li>Druck-Thread</li>
                        </ul>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-outline" onclick="navigateToChapter(1)">â† ZurÃ¼ck</button>
                    <button class="btn btn-primary" onclick="navigateToChapter(3)">Weiter â†’</button>
                </div>
            </section>

            <!-- Chapter 3: Synchronisation -->
            <section id="chapter3" class="content-section">
                <div class="chapter-header">
                    <span class="chapter-number">Kapitel 3</span>
                    <h2>Synchronisation und Konfliktmanagement</h2>
                </div>

                <div class="pdf-download-box">
                    <div class="pdf-icon">ğŸ“„</div>
                    <div class="pdf-content">
                        <h3>ğŸ“š Arbeitsunterlagen</h3>
                        <p>Bitte bearbeitet das folgende Aufgabenblatt:</p>
                        <a href="4-2_und_4-3_NebenlaÌˆufige_Prozesse.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-primary" style="display: inline-block; margin-top: 1rem;">
                            â¬‡ï¸ PDF herunterladen: 4-2 und 4-3 NebenlÃ¤ufige Prozesse.pdf
                        </a>
                    </div>
                </div>

                <div class="example-box">
                    <h3>ğŸ³ Fortsetzung: Sepp und Max bereiten ein MenÃ¼ zu</h3>
                    <p>Max ist fÃ¼r die Vorspeise und das Dessert zustÃ¤ndig, wÃ¤hrend sich Sepp um das Hauptgericht kÃ¼mmert.</p>
                </div>

                <div class="task-box">
                    <h4>ğŸ“ Arbeitsauftrag</h4>
                    <p>Ãœberlege, ob auch AbhÃ¤ngigkeiten zwischen den beiden bestehen kÃ¶nnten. Wenn ja, welche? Und wie mÃ¼ssten Sepp und Max dann zusammenarbeiten?</p>
                    <button class="btn btn-secondary" onclick="toggleSolution('solution2a')">LÃ¶sung anzeigen</button>
                </div>

                <div id="solution2a" class="solution-box hidden">
                    <h4>âœ… LÃ¶sung</h4>
                    <p>Beide nebenlÃ¤ufigen Prozesse (TÃ¤tigkeiten der KÃ¶che) sind nur bezÃ¼glich ihrer Abarbeitung unabhÃ¤ngig, jedoch <strong>indirekt voneinander abhÃ¤ngig</strong>:</p>
                    <ul>
                        <li>Zugriff auf gleiche Betriebsmittel (Herd, Pfannen, Zutaten)</li>
                        <li>Arbeitsteilung erfordert Koordination</li>
                        <li>Max kann das Hauptgericht erst servieren, wenn die GÃ¤ste die Vorspeise verzehrt haben</li>
                        <li>Zeitliche und Ã¶rtliche Abstimmung notwendig</li>
                    </ul>
                    <p class="highlight">â†’ <strong>Prozess-Synchronisation</strong> ist erforderlich!</p>
                </div>

                <div class="example-box warning">
                    <h3>âš ï¸ Beispiel 2: Sepp und das kleine PfÃ¤nnchen</h3>
                    <p>Sepp will Zwiebeln anbraten und Zucker einkochen. FÃ¼r beide Arbeiten braucht er ein kleines PfÃ¤nnchen. Leider ist sein Arbeitsplatz etwas spÃ¤rlich ausgestattet, und so hat er nur ein einziges, geeignetes PfÃ¤nnchen.</p>
                </div>

                <div class="task-box">
                    <h4>ğŸ“ ArbeitsauftrÃ¤ge</h4>
                    <ol>
                        <li>Warum kann man davon sprechen, dass sich fÃ¼r Sepp Konflikte beim Kochen ergeben?</li>
                        <li>Ãœbertrage das Beispiel auf die Informatik und nenne mÃ¶gliche Konflikte und KonfliktlÃ¶sungen bei der Computernutzung.</li>
                    </ol>
                    <button class="btn btn-secondary" onclick="toggleSolution('solution2b')">LÃ¶sung anzeigen</button>
                </div>

                <div id="solution2b" class="solution-box hidden">
                    <h4>âœ… LÃ¶sung</h4>
                    <p><strong>Zu 1:</strong> Zeitdruck und beschrÃ¤nkte Betriebsmittel fÃ¼hren zu Konflikten:</p>
                    <ul>
                        <li>Gleichzeitige Verwendung des PfÃ¤nnchens nicht mÃ¶glich</li>
                        <li>Problem: Knappheit der Ressourcen</li>
                        <li>Wettstreit um notwendige Ressourcen (Betriebsmittel)</li>
                    </ul>

                    <p><strong>Zu 2: Informatik-Beispiele:</strong></p>
                    
                    <p><strong>Beispiel 1:</strong> Ausdruck zweier Texte auf demselben Drucker</p>
                    <ul>
                        <li>Ausgaben dÃ¼rfen auf dem Papier nicht gemischt erscheinen</li>
                        <li>Ein Prozess muss gesperrt werden, bis der andere seine Ausgabe beendet hat</li>
                    </ul>

                    <p><strong>Beispiel 2:</strong> Zwei Prozesse greifen schreibend auf dieselbe Datei zu</p>
                    
                    <p><strong>LÃ¶sungsansÃ¤tze:</strong></p>
                    <ol>
                        <li><strong>Monitor (Belegung eines Betriebsmittels):</strong>
                            <ul>
                                <li>Abfrage an das Betriebsmittel â€frei?"</li>
                                <li>Falls JA: Betriebsmittel belegen</li>
                                <li>Falls NEIN: Warten auf Freigabe</li>
                            </ul>
                        </li>
                        <li><strong>Kritische Abschnitte</strong> (Critical Section)</li>
                    </ol>
                </div>

                <div class="concept-box">
                    <h3>ğŸ’¡ Merkzettel: Synchronisation</h3>
                    <div class="key-points">
                        <div class="key-point">
                            <span class="number">1</span>
                            <div>
                                <strong>Parallele Prozesse kÃ¶nnen indirekt voneinander abhÃ¤ngig sein</strong>
                                <p>â†’ Synchronisation (= Abstimmung paralleler VorgÃ¤nge aufeinander)</p>
                            </div>
                        </div>
                        <div class="key-point">
                            <span class="number">2</span>
                            <div>
                                <strong>Aufgrund knapper Betriebsmittel kÃ¶nnen Konflikte auftreten</strong>
                                <p>â†’ Konfliktmanagement (z.B. durch wechselseitigen Ausschluss)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="example-box danger">
                    <h3>ğŸš¨ Beispiel 3: Sepp und Max beim AufrÃ¤umen (Deadlock)</h3>
                    <p>Die KÃ¼che ist aufgerÃ¤umt, die beiden KÃ¶che mÃ¼ssen nur noch den Boden wischen. Jeder mÃ¶chte mÃ¶glichst rasch nach Hause gehen.</p>
                    <p>WÃ¤hrend Sepp den Besen holt, bringt Max den Wassereimer. Als sich nun Max nach dem Besen umsieht, merkt er, dass Sepp sich diesen genommen hat. Sepp geht es genauso: Wie er sich den Wassereimer nehmen will, sieht er, dass Max diesen bereits hat.</p>
                    <p class="highlight">â€Gib mir den Besen!", ruft Max. â€Nein", sagt Sepp, â€ich will jetzt den Wassereimer!" Die beiden blockieren sich. Wenn keiner nachgibt, werden sie den Boden nie reinigen kÃ¶nnen.</p>
                </div>

                <div class="task-box">
                    <h4>ğŸ“ ArbeitsauftrÃ¤ge</h4>
                    <ol>
                        <li>Was unterscheidet diesen Konflikt von dem vorangehenden? Wie kann der Konflikt gelÃ¶st werden?</li>
                        <li>Ãœbertrage das Beispiel auf die Informatik und nenne mÃ¶gliche Konflikte und KonfliktlÃ¶sungen.</li>
                    </ol>
                    <button class="btn btn-secondary" onclick="toggleSolution('solution2c')">LÃ¶sung anzeigen</button>
                </div>

                <div id="solution2c" class="solution-box hidden">
                    <h4>âœ… LÃ¶sung</h4>
                    <p><strong>Zu 1: Unterschied und LÃ¶sung:</strong></p>
                    <p class="highlight">Dies ist eine <strong>Verklemmung (Deadlock)</strong>!</p>
                    <p>LÃ¶sung: AuflÃ¶sen der Verklemmung durch Zuteilung beider Betriebsmittel (Eimer und Besen) an einen Prozess.</p>

                    <p><strong>Zu 2: Informatik-Beispiel:</strong></p>
                    <p>Ein Prozess mÃ¶chte Daten von der Festplatte auf einen Speicherstick transportieren:</p>
                    <ul>
                        <li>Prozess A reserviert die Festplatte und wartet auf den Speicherstick</li>
                        <li>Prozess B hat den Speicherstick belegt und wartet auf die Festplatte</li>
                        <li>Keiner der beiden Prozesse kann seine Verarbeitung fortsetzen</li>
                        <li>Nur ein â€gewaltsamer" Eingriff von auÃŸen kann die gegenseitige Blockierung auflÃ¶sen</li>
                    </ul>

                    <p><strong>Weitere Beispiele:</strong></p>
                    <ul>
                        <li>Kontobuchungen (Ãœberweisung)</li>
                        <li>Datenbanken (Schreib- und Lesesperren)</li>
                    </ul>
                </div>

                <div class="concept-box warning">
                    <h3>ğŸ’¡ Merkzettel: Verklemmung</h3>
                    <p class="highlight">Der wechselseitige Ausschluss genÃ¼gt nicht â€“ parallele Prozesse kÃ¶nnen sich sogar gegenseitig blockieren!</p>
                    <p><strong>Verklemmung (Deadlock):</strong> Zwei oder mehr Prozesse warten gegenseitig auf Ressourcen, die der jeweils andere hÃ¤lt.</p>
                    <p><strong>LÃ¶sung:</strong> Blockaden mÃ¼ssen erkannt und aufgelÃ¶st werden (Schutz durch Prozesskommunikation)</p>
                </div>

                <div class="strategy-grid">
                    <h3>ğŸ“Š Strategien zur Vermeidung bzw. LÃ¶sung von Konflikten</h3>
                    
                    <div class="strategy-card">
                        <h4>Wechselseitiger Ausschluss (exklusiv)</h4>
                        <ul>
                            <li><strong>Monitor</strong> (engl. to monitor = Ã¼berwachen)</li>
                            <li><strong>Kritische Abschnitte</strong> (Critical Section)</li>
                            <li>Konfliktmanagement</li>
                            <li>Prozesskommunikation</li>
                        </ul>
                    </div>

                    <div class="strategy-card">
                        <h4>Zeitliche Synchronisation (inklusiv)</h4>
                        <ul>
                            <li><strong>Meeting Room</strong></li>
                            <li><strong>Barriere</strong> (Barrier)</li>
                            <li>Gegenseitige Abstimmung (z.B. Warten)</li>
                        </ul>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-outline" onclick="navigateToChapter(2)">â† ZurÃ¼ck</button>
                    <button class="btn btn-primary" onclick="navigateToChapter(4)">Weiter â†’</button>
                </div>
            </section>

            <!-- Chapter 4: MultiKara -->
            <section id="chapter4" class="content-section">
                <div class="chapter-header">
                    <span class="chapter-number">Kapitel 4</span>
                    <h2>Ãœbungen mit MultiKara</h2>
                </div>

                <div class="info-box">
                    <h3>ğŸ MultiKara: Concurrent Programming</h3>
                    <p>MultiKara ist eine Lernumgebung der ETH ZÃ¼rich, mit der parallele Prozesse visuell programmiert und getestet werden kÃ¶nnen.</p>
                </div>

                <div class="pdf-download-box multikara-downloads">
                    <div class="pdf-icon">ğŸ“¥</div>
                    <div class="pdf-content">
                        <h3>ğŸ“š Materialien zum Download</h3>
                        <p>Lade zunÃ¤chst das PDF mit Anleitung und Aufgaben, die Starter-Dateien und die Anwendung selbst herunter:</p>
                        <div class="download-links">
                            <a href="MultiKara-Anleitung-Aufgaben.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-primary">
                                â¬‡ï¸ MultiKara-Anleitung-Aufgaben.pdf
                            </a>
                            <a href="1_Verkehrsproblem_Kara.zip" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-primary">
                                â¬‡ï¸ 1_Verkehrsproblem_Kara.zip
                            </a>
                            <a href="2_Bus_Kara.zip" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-primary">
                                â¬‡ï¸ 2_Bus_Kara.zip
                            </a>

                            <a href="https://www.swisseduc.ch/informatik/karatojava/multikara/" download target="_blank" class="btn btn-primary">
                                ğŸ”— MultiKara herunterladen
                            </a>
                        </div>
                    </div>
                </div>

                <div class="exercise-grid">
                    <div class="exercise-card">
                        <h4>ğŸ“ Aufgabenblatt 1: Verkehrsproblem</h4>
                        <p>Simuliere Verkehrssituationen mit mehreren Karas, die sich auf einer StraÃŸe begegnen.</p>
                        <p><strong>Lernziele:</strong></p>
                        <ul>
                            <li>Grundlagen der NebenlÃ¤ufigkeit</li>
                            <li>Kollisionsvermeidung</li>
                            <li>Scheduler und PrioritÃ¤ten</li>
                        </ul>
                        <a href="MultiKara Aufgabe1.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-secondary">Aufgabenblatt Ã¶ffnen (PDF)</a>
                    </div>

                    <div class="exercise-card">
                        <h4>ğŸ“ Aufgabenblatt 2: Busproblem</h4>
                        <p>Mehrere Busse (Karas) mÃ¼ssen koordiniert an Haltestellen halten.</p>
                        <p><strong>Lernziele:</strong></p>
                        <ul>
                            <li>Synchronisation von Prozessen</li>
                            <li>Warten und Signalisieren</li>
                            <li>Kritische Abschnitte</li>
                        </ul>
                        <a href="MultiKara Aufgabe2.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-secondary">Aufgabenblatt Ã¶ffnen (PDF)</a>
                    </div>

                    <div class="exercise-card">
                        <h4>ğŸ“ Aufgabenblatt 3: Weitere Ãœbungen</h4>
                        <p><strong>Aufgabe 1:</strong> FÃ¼llen eines Rechtecks mit mehreren Karas</p>
                        <p><strong>Aufgabe 2:</strong> Erzeuger-Verbraucher-Problem</p>
                        <p><strong>Lernziele:</strong></p>
                        <ul>
                            <li>Komplexe Synchronisation</li>
                            <li>Producer-Consumer-Pattern</li>
                            <li>Deadlock-Vermeidung</li>
                        </ul>
                        <a href="MultiKara Aufgabe3.pdf" download target="_blank"
                            rel="noopener noreferrer" class="btn btn-secondary">Aufgabenblatt Ã¶ffnen (PDF)</a>
                    </div>
                </div>

                <div class="concept-box">
                    <h3>ğŸ® MultiKara Features</h3>
                    <div class="feature-list">
                        <div class="feature">
                            <span class="icon">âš™ï¸</span>
                            <div>
                                <strong>Scheduler / PrioritÃ¤ten</strong>
                                <p>Steuere die AusfÃ¼hrungsreihenfolge der Karas</p>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="icon">ğŸ¯</span>
                            <div>
                                <strong>Geschwindigkeitskontrolle</strong>
                                <p>Passe die AusfÃ¼hrungsgeschwindigkeit an (langsam bis schnell)</p>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="icon">ğŸ”</span>
                            <div>
                                <strong>Visuelle Programmierung</strong>
                                <p>Beobachte parallele Prozesse in Echtzeit</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-outline" onclick="navigateToChapter(3)">â† ZurÃ¼ck</button>
                    <button class="btn btn-primary" onclick="navigateToChapter(5)">Weiter â†’</button>
                </div>
            </section>

            <!-- Chapter 5: Java -->
<section id="chapter5" class="content-section">
    <div class="chapter-header">
        <span class="chapter-number">Kapitel 5</span>
        <h2>NebenlÃ¤ufigkeit in Java</h2>
    </div>

    <div class="pdf-download-box">
        <div class="pdf-icon">ğŸ“„</div>
        <div class="pdf-content">
            <h3>ğŸ“š Arbeitsunterlagen</h3>
            <p>Bitte bearbeitet das folgende Aufgabenblatt:</p>
            <a href="4-4 und 4-5 Betriebsmittelprobleme.pdf" download target="_blank"
                rel="noopener noreferrer" class="btn btn-primary" style="display: inline-block; margin-top: 1rem;">
                â¬‡ï¸ PDF herunterladen: 4-4 und 4-5 Betriebsmittelprobleme.pdf
            </a>
        </div>
    </div>

    <div class="info-box">
        <p>Java bietet die MÃ¶glichkeit, einzelne Programmteile (Threads) quasi-parallel ablaufen zu lassen.</p>
    </div>

    <div class="concept-box">
        <h3>ğŸ”§ Thread-Erstellung in Java</h3>
        <p>Ein Thread ist in Java immer die Instanz einer Klasse, die das Interface <code>Runnable</code> implementiert hat.</p>
        
        <p><strong>Zwei MÃ¶glichkeiten zur Thread-Erstellung:</strong></p>
        <ol>
            <li>Subklasse von <code>Thread</code> erstellen</li>
            <li>Interface <code>Runnable</code> implementieren</li>
        </ol>
    </div>

    <!-- AUFGABE 1: PRIMM - Predict, Run, Investigate, Modify -->
    <div class="chapter-header" style="margin-top: 3rem;">
        <span class="chapter-number">Aufgabe 1</span>
        <h2>Thread und Runnable verstehen (PRIMM)</h2>
    </div>

    <div class="task-box">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 1: Predict & Run</h4>
        <ol>
            <li><strong>Predict:</strong> Lies den Code unten durch. Was erwartest du als Ausgabe? In welcher Reihenfolge werden die Ausgaben erscheinen?</li>
            <li><strong>Run:</strong> FÃ¼hre den Code mehrmals aus. Was beobachtest du?</li>
            <li><strong>Investigate:</strong> Warum ist die Ausgabe nicht immer gleich? Was passiert mit "Main beendet"?</li>
        </ol>
    </div>

    <div class="ide-container">
        <h4 class="ide-title">ğŸ”§ Thread vs. Runnable - Experimentieren</h4>
        <div class="java-online" 
             style="width: 100%; height: 550px;" 
             data-java-online="{ 'id': 'ThreadRunnableDemo', 'speed': 1000, 'withBottomPanel': true, 'withFileList': true, 'withConsole': true }">
            <script type="text/plain" title="Hauptprogramm.java">
// Variante 1 â€“ Thread-Klasse
MyThread t1 = new MyThread("Thread-Klasse");
t1.start();

// Variante 2 â€“ Runnable
Thread t2 = new Thread(new MyRunnable("Runnable"));
t2.start();

System.out.println("Main beendet");
            </script>
            <script type="text/plain" title="MyThread.java">
class MyThread extends Thread {

   private String name;

   public MyThread(String name) {
      this.name = name;
   }

   public void run() {
      for (int i = 0; i < 5; i++) {
         System.out.println(name + " lÃ¤uft: " + i);
         try {
            //Hier kann es vorkommen, dass eine Exception fliegt, 
            // daher muss dieser Code mit einem try - catch Block 
            // umgeben werden, um dies abzufangen. 
            Thread.sleep(10); 
         } catch(Exception e) { 
            System.out.println(e.getMessage());
         }
      }
   }
}
            </script>
            <script type="text/plain" title="MyRunnable.java">
class MyRunnable implements Runnable {

   private String name;

   public MyRunnable(String name) {
      this.name = name;
   }

   public void run() {
      for (int i = 0; i < 5; i++) {
         System.out.println(name + " lÃ¤uft: " + i);
         try {
            Thread.sleep(10); // hier entsprechend ebenso
         } catch(Exception e) { 
            System.out.println(e.getMessage());
         }
      }
   }
}
            </script>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 2: Modify & Make</h4>
        <ol start="4">
            <li><strong>Modify:</strong> Ã„ndere die Sleep-Zeit auf unterschiedliche Werte (z.B. 100ms vs. 10ms). Was passiert?</li>
            <li><strong>Modify:</strong> Erstelle einen dritten Thread (egal ob Thread oder Runnable). Beobachte das Verhalten.</li>
            <li><strong>Make:</strong> ErklÃ¤re den Unterschied zwischen <code>start()</code> und <code>run()</code>. Was wÃ¼rde passieren, wenn du <code>run()</code> direkt aufrufst?</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe1')">LÃ¶sung anzeigen</button>
    </div>

    <div id="solution_aufgabe1" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 1</h4>
        
        <p><strong>Zu 1-3: Predict, Run, Investigate:</strong></p>
        <ul>
            <li>Die Ausgaben erscheinen in <strong>nicht-deterministischer Reihenfolge</strong></li>
            <li>"Main beendet" erscheint oft <strong>vor</strong> den Thread-Ausgaben, weil der Hauptthread nicht auf die anderen wartet</li>
            <li>Die Threads laufen <strong>parallel/quasi-parallel</strong> - das Betriebssystem entscheidet Ã¼ber die Reihenfolge</li>
            <li>Bei mehrfacher AusfÃ¼hrung kann die Reihenfolge variieren</li>
        </ul>

        <p><strong>Zu 4: Sleep-Zeit Ã¤ndern:</strong></p>
        <p class="highlight">LÃ¤ngere Sleep-Zeiten fÃ¼hren zu mehr "Durchmischung" der Ausgaben, da andere Threads mehr Zeit bekommen.</p>

        <p><strong>Zu 5: Dritter Thread:</strong></p>
        <p>Mit drei Threads wird die Ausgabe noch stÃ¤rker durchmischt - alle drei konkurrieren um CPU-Zeit.</p>

        <p><strong>Zu 6: start() vs. run():</strong></p>
        <div class="highlight">
            <p><strong>start():</strong> Startet einen neuen Thread und ruft dann run() in diesem Thread auf</p>
            <p><strong>run():</strong> FÃ¼hrt den Code im aktuellen Thread aus (kein neuer Thread!)</p>
            <p>â†’ Direkter Aufruf von run() wÃ¼rde sequentiell ablaufen, nicht parallel!</p>
        </div>
    </div>

    <!-- AUFGABE 2: Synchronisation mit synchronized -->
    <div class="chapter-header" style="margin-top: 3rem;">
        <span class="chapter-number">Aufgabe 2</span>
        <h2>Race Conditions und synchronized (PRIMM)</h2>
    </div>

    <div class="concept-box warning">
        <h3>ğŸ”’ Das Problem: Race Conditions</h3>
        <p>Wenn mehrere Threads gleichzeitig auf dieselbe Variable zugreifen, kÃ¶nnen <strong>Race Conditions</strong> auftreten:</p>
        <ul>
            <li>Thread A liest den Wert</li>
            <li>Thread B liest den gleichen Wert</li>
            <li>Beide erhÃ¶hen ihn</li>
            <li>Beide schreiben zurÃ¼ck â†’ <strong>Ein Inkrement geht verloren!</strong></li>
        </ul>
    </div>

    <div class="task-box">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 1: Das Problem erkennen</h4>
        <ol>
            <li><strong>TODO1:</strong> Tausche <code>long</code> durch <code>int</code> in der increment-Methode und fÃ¼hre den Code mehrfach aus.</li>
            <li>Beschreibe deine Beobachtungen: Ist der Endstand immer korrekt?</li>
            <li>ErklÃ¤re, warum das Ergebnis oft falsch ist (Race Condition!)</li>
        </ol>
    </div>

    <div class="ide-container">
        <h4 class="ide-title">ğŸ”§ Counter Problem - Race Condition</h4>
        <div class="java-online" 
             style="width: 100%; height: 550px;" 
             data-java-online="{ 'id': 'CounterProblem', 'speed': 1000, 'withBottomPanel': true, 'withFileList': true, 'withConsole': true }">
            <script type="text/plain" title="Hauptprogramm.java">
Counter counter = new Counter();
   
Worker w1 = new Worker(counter);
Worker w2 = new Worker(counter);
   
w1.start();
w2.start();
            </script>
            <script type="text/plain" title="Counter.java">
class Counter {

   public int count = 0;
   
   // zur Veranschaulichung komplizierter als nÃ¶tig
   public void increment() { 
      // TODO1 Tausche long durch int und fÃ¼hre mehrfach aus. 
      // Beschreibe deine Beobachtungen und erklÃ¤re sie
      long currentcount = count; 
      currentcount = currentcount + 1; 
      count = (int)currentcount;
   }
}
            </script>
            <script type="text/plain" title="Worker.java">
class Worker extends Thread {

   private Counter counter;

   public Worker(Counter counter) {
      this.counter = counter;
   }

   public void run() {
      int anzahlWdh = 100000;
      for (int i = 0; i < anzahlWdh; i++) {
         counter.increment();
      } 
      System.out.println("Erwartet: " + 2 * anzahlWdh + " Endstand: " + counter.count);
   }
}
            </script>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 2: Die LÃ¶sung implementieren</h4>
        <ol start="4">
            <li><strong>TODO2:</strong> FÃ¼ge das SchlÃ¼sselwort <code>synchronized</code> vor die increment-Methode ein:
                <pre>public synchronized void increment() { ... }</pre>
            </li>
            <li>FÃ¼hre den Code erneut mehrfach aus. Was hat sich geÃ¤ndert?</li>
            <li>ErklÃ¤re, wie <code>synchronized</code> das Problem lÃ¶st (Stichwort: Monitor, kritischer Abschnitt)</li>
            <li><strong>Bonus:</strong> Was wÃ¼rde passieren, wenn jeder Worker sein eigenes Counter-Objekt hÃ¤tte?</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe2')">LÃ¶sung anzeigen</button>
    </div>

    <div id="solution_aufgabe2" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 2</h4>
        
        <p><strong>Zu 1-3: Beobachtungen und ErklÃ¤rung:</strong></p>
        <div class="highlight">
            <p><strong>Beobachtung:</strong> Der Endstand ist meist kleiner als 200.000 und variiert bei jedem Durchlauf!</p>
            <p><strong>ErklÃ¤rung (Race Condition):</strong></p>
            <ul>
                <li>Thread 1 liest count = 1000</li>
                <li>Thread 2 liest count = 1000 (bevor Thread 1 zurÃ¼ckschreibt!)</li>
                <li>Thread 1 berechnet 1001 und schreibt zurÃ¼ck</li>
                <li>Thread 2 berechnet ebenfalls 1001 und Ã¼berschreibt</li>
                <li>â†’ Statt 1002 ist count nur 1001 - ein Inkrement ging verloren!</li>
            </ul>
        </div>

        <p><strong>Zu 4-6: synchronized als LÃ¶sung:</strong></p>
        <div class="highlight">
            <p><strong>Mit synchronized:</strong> Der Endstand ist immer korrekt (200.000)</p>
            <p><strong>Wie es funktioniert:</strong></p>
            <ul>
                <li><code>synchronized</code> erstellt einen <strong>Monitor</strong> um die Methode</li>
                <li>Nur ein Thread darf gleichzeitig die Methode ausfÃ¼hren</li>
                <li>Andere Threads mÃ¼ssen warten, bis der Monitor frei ist</li>
                <li>â†’ Die increment-Operation wird <strong>atomar</strong> (unteilbar)</li>
            </ul>
        </div>

        <p><strong>Zu 7: Bonus - Eigene Counter-Objekte:</strong></p>
        <p class="highlight">Wenn jeder Worker sein eigenes Counter-Objekt hÃ¤tte, gÃ¤be es keine Race Condition, da keine gemeinsame Ressource existiert. Aber: Das Gesamtergebnis wÃ¤re dann auf zwei Objekte verteilt!</p>
    </div>

    <!-- AUFGABE 3: Semaphor-Prinzip mit synchronized auf Objekten -->
    <div class="chapter-header" style="margin-top: 3rem;">
        <span class="chapter-number">Aufgabe 3</span>
        <h2>Semaphore und Objekt-Synchronisation (PRIMM)</h2>
    </div>

    <div class="concept-box">
        <h3>ğŸ” Synchronisation auf Objektebene</h3>
        <p><code>synchronized</code> kann nicht nur auf Methoden, sondern auch auf <strong>spezifische Objekte</strong> angewendet werden:</p>
        <ul>
            <li>Jedes Objekt hat einen <strong>Monitor</strong> (Semaphor)</li>
            <li>Nur ein Thread kann den Monitor eines Objekts gleichzeitig besitzen</li>
            <li>Verschiedene Objekte haben verschiedene Monitore!</li>
        </ul>
    </div>

    <div class="task-box">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 1: Investigate</h4>
        <ol>
            <li><strong>TODO1.1:</strong> WofÃ¼r wird die Klasse <code>ThePrinter</code> benÃ¶tigt?</li>
            <li><strong>TODO1.2:</strong> WofÃ¼r wird das Objekt <code>printer1</code> benÃ¶tigt?</li>
            <li><strong>Run:</strong> FÃ¼hre den Code aus und beobachte die Ausgabe. Sind die Ausgaben durcheinander oder geordnet?</li>
        </ol>
    </div>

    <div class="ide-container">
        <h4 class="ide-title">ğŸ”§ Printer Synchronisation - Semaphor-Prinzip</h4>
        <div class="java-online" 
             style="width: 100%; height: 600px;" 
             data-java-online="{ 'id': 'PrinterSync', 'speed': 1000, 'withBottomPanel': true, 'withFileList': true, 'withConsole': true }">
            <script type="text/plain" title="Hauptprogramm.java">
//TODO1.2: WofÃ¼r wird dieses Objekt benÃ¶tigt? 
ThePrinter printer1 = new ThePrinter();

//TODO1.3: Erstelle 2 weitere ThePrinter Objekte und gib jedem 
// Thread ein unterschiedliches printer Objekt. Beschreibe den Unterschied 
// und begrÃ¼nde ihn! 
TestThread m1 = new TestThread("THREAD 1", printer1);
TestThread m2 = new TestThread("THREAD 2", printer1);
TestThread m3 = new TestThread("THREAD 3", printer1);

m1.start(); 
m2.start();
m3.start();
            </script>
             <script type="text/plain" title="TestThread.java">
public class TestThread extends Thread {
   String name;
   ThePrinter thePrinter;

   public TestThread(String name, ThePrinter theDemo) {
      this.thePrinter = theDemo;
      this.name = name;
   }

   @Override
   public void run() {
      //thePrinter.printingStuff(name);
      thePrinter.printingStuffSync(name);
   }
}
            </script>
            <script type="text/plain" title="ThePrinter.java">
//TODO1.1: WofÃ¼r wird diese Klasse benÃ¶tigt? 
public class ThePrinter {
   public synchronized void printingStuffSync(String name) {
      for (int i = 0; i < 10; i++) {
         System.out.println(name + " :: " + i);
         try {
            Thread.sleep(1);
         } catch(Exception e) {
            System.out.println(e.getMessage());
         }
      }
   }

   public void printingStuff(String name) {
      for (int i = 0; i < 10; i++) {
         System.out.println(name + " :: " + i);
         try {
            Thread.sleep(1);
         } catch(Exception e) {
            System.out.println(e.getMessage());
         }
      }
   }
}
            </script>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 2: Modify & Compare</h4>
        <ol start="4">
            <li><strong>TODO1.3:</strong> Erstelle 2 weitere ThePrinter-Objekte (<code>printer2</code>, <code>printer3</code>)</li>
            <li>Gib jedem Thread ein unterschiedliches printer-Objekt (m1 â†’ printer1, m2 â†’ printer2, m3 â†’ printer3)</li>
            <li>Beschreibe den Unterschied im Verhalten und begrÃ¼nde ihn!</li>
            <li><strong>Modify:</strong> Kommentiere <code>printingStuffSync</code> aus und aktiviere <code>printingStuff</code>. Was Ã¤ndert sich?</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe3')">LÃ¶sung anzeigen</button>
    </div>

    <div id="solution_aufgabe3" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 3</h4>
        
        <p><strong>Zu 1-3: Investigate:</strong></p>
        <div class="highlight">
            <p><strong>TODO1.1 - ThePrinter Klasse:</strong></p>
            <p>Die Klasse kapselt die Druck-FunktionalitÃ¤t und dient als <strong>gemeinsame Ressource</strong>, auf die mehrere Threads zugreifen.</p>
            
            <p><strong>TODO1.2 - printer1 Objekt:</strong></p>
            <p>Das Objekt ist der <strong>Monitor</strong> fÃ¼r die Synchronisation. Alle Threads, die auf dasselbe printer1-Objekt zugreifen, mÃ¼ssen sich den Monitor teilen.</p>
            
            <p><strong>Beobachtung:</strong> Die Ausgaben sind <strong>geordnet</strong> - jeder Thread druckt seine 10 Zeilen komplett, bevor der nÃ¤chste dran kommt.</p>
        </div>

        <p><strong>Zu 4-6: Modify & Compare:</strong></p>
        <div class="highlight">
            <p><strong>Mit verschiedenen printer-Objekten:</strong></p>
            <ul>
                <li>Jeder Thread hat seinen eigenen Monitor (sein eigenes printer-Objekt)</li>
                <li>Die Threads kÃ¶nnen <strong>parallel</strong> drucken</li>
                <li>Die Ausgaben sind <strong>durcheinander</strong></li>
                <li>â†’ <code>synchronized</code> wirkt nur auf dasselbe Objekt!</li>
            </ul>
            
            <p><strong>Mit printingStuff (ohne synchronized):</strong></p>
            <ul>
                <li>Auch mit einem gemeinsamen printer-Objekt sind die Ausgaben durcheinander</li>
                <li>Kein Monitor schÃ¼tzt den kritischen Bereich</li>
                <li>â†’ <code>synchronized</code> ist notwendig fÃ¼r geordnete Ausgabe!</li>
            </ul>
        </div>

        <p><strong>Wichtige Erkenntnis:</strong></p>
        <p class="highlight"><strong>synchronized</strong> bindet den Monitor an ein <strong>spezifisches Objekt</strong>. Verschiedene Objekte = verschiedene Monitore = keine Synchronisation zwischen ihnen!</p>
    </div>

    <!-- Merkzettel: Synchronisation -->
    <div class="concept-box" style="margin-top: 3rem;">
        <h3>ğŸ’¡ Merkzettel: Synchronisation</h3>
        <div class="key-points">
            <div class="key-point">
                <span class="number">1</span>
                <div>
                    <strong>Parallele Prozesse kÃ¶nnen indirekt voneinander abhÃ¤ngig sein</strong>
                    <p>â†’ Synchronisation (= Abstimmung paralleler VorgÃ¤nge aufeinander)</p>
                </div>
            </div>
            <div class="key-point">
                <span class="number">2</span>
                <div>
                    <strong>Aufgrund knapper Betriebsmittel kÃ¶nnen Konflikte auftreten</strong>
                    <p>â†’ Konfliktmanagement (z.B. durch wechselseitigen Ausschluss)</p>
                </div>
            </div>
        </div>
    </div>

    <div class="concept-box warning" style="margin-top: 2rem;">
        <h3>ğŸ”’ Synchronisation in Java</h3>
        <p>Die Synchronisation der Threads erfolgt mit:</p>
        
        <div class="sync-methods">
            <div class="sync-method">
                <h4><code>synchronized</code></h4>
                <p>Etabliert einen Monitor fÃ¼r einen kritischen Bereich. Gleichzeitig darf nur ein Thread auf das Objekt zugreifen.</p>
            </div>

            <div class="sync-method">
                <h4><code>wait()</code></h4>
                <p>Legt den eigenen Prozess schlafen und gibt den Monitor fÃ¼r andere Prozesse frei.</p>
            </div>

            <div class="sync-method">
                <h4><code>notify()</code></h4>
                <p>StÃ¶ÃŸt die Prozesse, die durch wait() angehalten wurden, wieder an.</p>
            </div>
        </div>
    </div>

    <!-- PRODUCER-CONSUMER PROBLEM -->
    <div class="chapter-header" style="margin-top: 3rem;">
        <span class="chapter-number">Aufgabe 4</span>
        <h2>Producer-Consumer-Problem (PRIMM)</h2>
    </div>

    <div class="example-box">
        <h3>ğŸ½ï¸ Klassisches Beispiel: Producer-Consumer-Problem</h3>
        <p>Das Erzeuger-Verbraucher-Problem ist eine klassische Problemstellung der Prozesssynchronisation.</p>
        
        <p><strong>Szenario:</strong></p>
        <p>Ein Roboter (Erzeuger) fÃ¼llt eine Kiste und legt sie auf einem Zwischenspeicherplatz mit begrenzter KapazitÃ¤t ab. Die Kiste wird dann von einem zweiten Roboter (Verbraucher) abgeholt. Auf den Zwischenspeicherplatz darf immer nur ein Roboter zugreifen.</p>
    </div>

    <div class="task-box">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 1: Investigate</h4>
        <ol>
            <li><strong>TODO0:</strong> Untersuche die Klassen Buffer, Consumer und Producer. Was machen sie?</li>
            <li><strong>TODO1a:</strong> Probiere Buffer1 und Buffer2 mit verschiedenen waitingTimes fÃ¼r Consumer und Producer aus (z.B. Producer schnell, Consumer langsam und umgekehrt)</li>
            <li><strong>TODO1b:</strong> ErklÃ¤re die Unterschiede im Verhalten zwischen Buffer1 und Buffer2</li>
        </ol>
    </div>

    <div class="ide-container">
        <h4 class="ide-title">ğŸ½ï¸ Producer-Consumer-Problem</h4>
        <div class="java-online" 
             style="width: 100%; height: 650px;" 
             data-java-online="{ 'id': 'ProducerConsumerProblem', 'speed': 1000, 'withBottomPanel': true, 'withFileList': true, 'withConsole': true }">
            <script type="text/plain" title="Hauptprogramm.java">
//TODO0 Untersuche die Klassen Buffer, Consumer und Producer

//TODO1 a) Probiere Buffer1 und Buffer2 mit verschiedenen waitingtimes fÃ¼r c und p 
//b) ErklÃ¤re die Unterschiede im Verhalten

//TODO2 a) untersuche die einzelnen Buffer Klassen hinsichtlich 
// ihrer Unterschiede und funktionsweisen 
// b) BegrÃ¼nde das Verhalten aus TODO1

//TODO3 -- siehe Buffer3



//AuswÃ¤hlen welcher Buffer genutzt werden soll
Buffer buffer = new Buffer1();

MyProducer p1 = new MyProducer(buffer);
MyProducer p2 = new MyProducer(buffer);
MyConsumer c = new MyConsumer(buffer);

System.out.println(buffer.name + " startet");
p1.setWaitingTime(50); 
p1.start();
p2.setWaitingTime(50); 
p2.start();

c.setWaitingTime(500); 
c.start();
            </script>
             <script type="text/plain" title="Buffer.java">
class Buffer {

   public int count = 0;
   public final int capacity = 5;
   public String name = "generic Buffer";

   Buffer(String name) {
      this.name = name; 
   }

   public void place() {
      if(count >= capacity) {
         System.out.println("Dinge dÃ¼rfen nicht passieren!");
      }

      count++;
      System.out.println("Produziert -> count = " + count);
   }

   public void take() {
      if(count <= 0) {
         System.out.println("Dinge dÃ¼rfen nicht passieren!");
      }

      count--;
      System.out.println("Konsumiert -> count = " + count);
   }
}
            </script>
            <script type="text/plain" title="MyConsumer.java">
class MyConsumer extends Thread {

   private Buffer buffer;
   private int waitingTime = 50; 

   public MyConsumer(Buffer buffer) {
      this.buffer = buffer;
   }

   public void run() {
      while (true) {
         buffer.take();
         try {
            Thread.sleep(waitingTime);
         } catch(Exception e) {
            System.out.println(e.getMessage());
         }
      }
   }

   void setWaitingTime(int waitingTime){
      this.waitingTime = waitingTime;
   }
}
            </script>
            <script type="text/plain" title="MyProducer.java">
class MyProducer extends Thread {

   private Buffer buffer;
   private int waitingTime = 50; 

   public MyProducer(Buffer buffer) {
      this.buffer = buffer;
   }

   public void run() {
      while (true) {
         buffer.place();
         try {
            Thread.sleep(waitingTime);
         } catch(Exception e) {
            System.out.println(e.getMessage());
         }
      }
   }

   void setWaitingTime(int waitingTime){
      this.waitingTime = waitingTime;
   }
}
            </script>
            <script type="text/plain" title="Buffer1.java">
class Buffer1 extends Buffer {

   Buffer1() {
      super("PCB1");
   }

   @Override
   public void place() {
      if(count >= capacity) {
         System.out.println("!!! PRODUCER: Buffer voll, trotzdem Produktion gestartet");
      }

      count++;
      System.out.println("Produziert -> count = " + count);
   }

   @Override
   public void take() {
      if(count <= 0) {
         System.out.println("!!! CONSUMER: Buffer leer, trotzdem Konsum gestartet");
      }

      count--;
      System.out.println("Konsumiert -> count = " + count);
   }
}
            </script>
            <script type="text/plain" title="Buffer2.java">
class Buffer2 extends Buffer {

   Buffer2() {
      super("PCB2");
   }

   @Override
   public synchronized void place() {
      if(count >= capacity) {
         System.out.println("Producer wartet NICHT, obwohl voll (Busy Waiting)");
         return;
      }

      count++;
      System.out.println("Produziert -> count = " + count);
   }

   @Override
   public synchronized void take() {
      if(count <= 0) {
         System.out.println("MyConsumer wartet NICHT, obwohl leer (Busy Waiting)");
         return;
      }

      count--;
      System.out.println("Konsumiert -> count = " + count);
   }
}
            </script>
            <script type="text/plain" title="Buffer3.java">
class Buffer3 extends Buffer {

   Buffer3() {
      super("PCB3");
   }

   //TODO3 a) Implementiere: Solange die KapazitÃ¤t voll ist, darf nun nichts hinzugefÃ¼gt werden 
   // und es muss gewartet werden. Nach erfolgreicher Produktion bzw. Ablage 
   // sollen die Konsumenten informiert werden um ihre arbeit wieder aufzunehmen.
   // b) gleiches umgekehrt fÃ¼r das herunternehmen vom Buffer
   // c) Probiere das Verhalten mit notify() und notifyAll() und erklÃ¤re warum hier 
   // eine Wiederholung mit Bedingung verwendet werden muss statt einer bedingten Anweisung.

   @Override
   public synchronized void place() {
      
      try {
         System.out.println("Producer wartet...");
         // TODO hier fehlt noch was
      } catch(Exception e) {
         System.out.println(e.getMessage());
      }

      count++;
      System.out.println("Produziert -> count = " + count);
      // TODO hier fehlt noch was
   }

   @Override
   public synchronized void take() {

      System.out.println("Consumer wartet...");

      count--;
      System.out.println("Konsumiert -> count = " + count);
   }
}
            </script>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 2: Analyze & Compare</h4>
        <ol start="4">
            <li><strong>TODO2a:</strong> Untersuche die einzelnen Buffer-Klassen (Buffer1, Buffer2, Buffer3) hinsichtlich ihrer Unterschiede und Funktionsweisen</li>
            <li><strong>TODO2b:</strong> BegrÃ¼nde das Verhalten aus TODO1 anhand des Codes</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe4_teil2')">LÃ¶sung Teil 2 anzeigen</button>
    </div>

    <div id="solution_aufgabe4_teil2" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 4 - Teil 2</h4>
        
        <p><strong>Zu TODO0: Klassen-Ãœbersicht:</strong></p>
        <div class="highlight">
            <ul>
                <li><strong>Buffer:</strong> Verwaltet einen Puffer mit begrenzter KapazitÃ¤t (5 PlÃ¤tze)</li>
                <li><strong>MyProducer:</strong> Produziert kontinuierlich Items und legt sie im Buffer ab</li>
                <li><strong>MyConsumer:</strong> Konsumiert kontinuierlich Items aus dem Buffer</li>
            </ul>
        </div>

        <p><strong>Zu TODO1a & 1b: Verhalten der Buffer:</strong></p>
        <div class="highlight">
            <p><strong>Buffer1 (ohne Synchronisation):</strong></p>
            <ul>
                <li>Keine Synchronisation â†’ <strong>Race Conditions!</strong></li>
                <li>count kann negativ oder > capacity werden</li>
                <li>Fehlermeldungen erscheinen hÃ¤ufig</li>
                <li>Produzent produziert auch wenn voll, Consumer konsumiert auch wenn leer</li>
            </ul>

            <p><strong>Buffer2 (mit synchronized und return):</strong></p>
            <ul>
                <li>Methoden sind synchronized â†’ kein gleichzeitiger Zugriff</li>
                <li>Bei vollem Buffer: Producer gibt auf (return) â†’ <strong>Busy Waiting</strong></li>
                <li>Bei leerem Buffer: Consumer gibt auf (return) â†’ <strong>Busy Waiting</strong></li>
                <li>count bleibt im gÃ¼ltigen Bereich, aber ineffizient (viele vergebliche Versuche)</li>
            </ul>
        </div>

        <p><strong>Zu TODO2a & 2b: Code-Analyse:</strong></p>
        <div class="highlight">
            <p><strong>Buffer1:</strong> Keine Schutzmechanismen â†’ Chaos</p>
            <p><strong>Buffer2:</strong> synchronized verhindert Race Conditions, aber return fÃ¼hrt zu Busy Waiting (Thread versucht es immer wieder, verschwendet CPU-Zeit)</p>
            <p><strong>Buffer3:</strong> Soll wait() und notify() nutzen fÃ¼r effiziente Synchronisation (siehe TODO3)</p>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 3: Make (TODO3)</h4>
        <ol start="6">
            <li><strong>TODO3a:</strong> Implementiere in Buffer3: Solange die KapazitÃ¤t voll ist, darf nichts hinzugefÃ¼gt werden und es muss gewartet werden (<code>wait()</code>). Nach erfolgreicher Produktion sollen die Konsumenten informiert werden (<code>notify()</code> oder <code>notifyAll()</code>)</li>
            <li><strong>TODO3b:</strong> Gleiches umgekehrt fÃ¼r das Herunternehmen vom Buffer</li>
            <li><strong>TODO3c:</strong> Probiere das Verhalten mit <code>notify()</code> und <code>notifyAll()</code>. ErklÃ¤re, warum hier eine Wiederholung mit Bedingung (<code>while</code>) verwendet werden muss statt einer bedingten Anweisung (<code>if</code>)</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe4_teil3')">LÃ¶sung Teil 3 anzeigen</button>
    </div>

    <div id="solution_aufgabe4_teil3" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 4 - Teil 3 (TODO3)</h4>
        
        <p><strong>Implementierung Buffer3:</strong></p>
        <pre>
@Override
public synchronized void place() {
   try {
      while (count >= capacity) {
         System.out.println("Producer wartet...");
         wait();
      }
   } catch(Exception e) {
      System.out.println(e.getMessage());
   }

   count++;
   System.out.println("Produziert -> count = " + count);
   notifyAll(); // oder notify()
}

@Override
public synchronized void take() {
   try {
      while (count <= 0) {
         System.out.println("Consumer wartet...");
         wait();
      }
   } catch(Exception e) {
      System.out.println(e.getMessage());
   }

   count--;
   System.out.println("Konsumiert -> count = " + count);
   notifyAll(); // oder notify()
}
        </pre>

        <p><strong>Zu TODO3c: while vs. if und notify() vs. notifyAll():</strong></p>
        <div class="highlight">
            <p><strong>Warum while statt if?</strong></p>
            <ul>
                <li>Nach <code>wait()</code> muss die Bedingung <strong>erneut geprÃ¼ft</strong> werden!</li>
                <li>Es kÃ¶nnte ein anderer Thread die Ressource bereits genommen haben</li>
                <li><strong>Spurious Wakeups:</strong> Thread kann auch ohne notify() aufwachen</li>
                <li>â†’ <code>while</code> garantiert, dass die Bedingung wirklich erfÃ¼llt ist</li>
            </ul>

            <p><strong>notify() vs. notifyAll():</strong></p>
            <ul>
                <li><strong>notify():</strong> Weckt einen zufÃ¤lligen wartenden Thread auf</li>
                <li><strong>notifyAll():</strong> Weckt alle wartenden Threads auf</li>
                <li>Mit mehreren Producern und Consumern ist <strong>notifyAll() sicherer</strong></li>
                <li>notify() kÃ¶nnte den falschen Thread aufwecken (z.B. Producer weckt Producer)</li>
            </ul>
        </div>

        <p><strong>Wichtige Konzepte:</strong></p>
        <div class="highlight">
            <ul>
                <li><strong>wait():</strong> Gibt den Monitor frei und wartet (Thread schlÃ¤ft)</li>
                <li><strong>notify()/notifyAll():</strong> Weckt wartende Threads auf</li>
                <li><strong>synchronized:</strong> Notwendig fÃ¼r wait() und notify()</li>
                <li>â†’ Effiziente Synchronisation ohne Busy Waiting!</li>
            </ul>
        </div>
    </div>

    <!-- SPEISENDE PHILOSOPHEN -->
    <div class="chapter-header" style="margin-top: 3rem;">
        <span class="chapter-number">Aufgabe 5</span>
        <h2>Speisende Philosophen - Deadlock (PRIMM)</h2>
    </div>

    <div class="example-box danger">
        <h3>ğŸ´ Klassisches Problem: Speisende Philosophen</h3>
        <p>Das Philosophenproblem ist ein klassisches Beispiel fÃ¼r die Notwendigkeit einer Prozess-Synchronisation.</p>
        
        <p><strong>Szenario:</strong></p>
        <p>Es sitzen fÃ¼nf Philosophen an einem runden Tisch, und jeder hat einen Teller mit Spaghetti vor sich. Zum Essen von Spaghetti benÃ¶tigt jeder Philosoph zwei Gabeln. Allerdings sind nur fÃ¼nf Gabeln vorhanden, die zwischen den Tellern liegen.</p>
        
        <p><strong>Das Problem:</strong></p>
        <ul>
            <li>Jeder Philosoph greift zuerst die linke, dann die rechte Gabel</li>
            <li>Wenn alle gleichzeitig ihre linke Gabel nehmen, wartet jeder auf die rechte</li>
            <li>Niemand kann essen â†’ <strong>Deadlock!</strong></li>
        </ul>
    </div>

    <div class="concept-box warning">
        <h3>ğŸ’¡ Merkzettel: Verklemmung</h3>
        <p class="highlight">Der wechselseitige Ausschluss genÃ¼gt nicht â€“ parallele Prozesse kÃ¶nnen sich sogar gegenseitig blockieren!</p>
        <p><strong>Verklemmung (Deadlock):</strong> Zwei oder mehr Prozesse warten gegenseitig auf Ressourcen, die der jeweils andere hÃ¤lt.</p>
        <p><strong>LÃ¶sung:</strong> Blockaden mÃ¼ssen erkannt und aufgelÃ¶st werden (Schutz durch Prozesskommunikation)</p>
    </div>

    <div class="task-box">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 1: Deadlock provozieren</h4>
        <ol>
            <li><strong>Predict:</strong> Was wird passieren, wenn alle Philosophen gleichzeitig versuchen zu essen?</li>
            <li><strong>Run:</strong> FÃ¼hre den Code aus. Beobachte, was passiert. Kommt es zu einem Deadlock?</li>
            <li><strong>Investigate:</strong> Analysiere den Code. Warum entsteht der Deadlock? Welche Bedingungen mÃ¼ssen erfÃ¼llt sein?</li>
        </ol>
    </div>

    <div class="ide-container">
        <h4 class="ide-title">ğŸ´ Speisende Philosophen - Deadlock Version</h4>
        <div class="java-online" 
             style="width: 100%; height: 650px;" 
             data-java-online="{ 'id': 'PhilosophersDeadlock', 'speed': 1000, 'withBottomPanel': true, 'withFileList': true, 'withConsole': true }">
            <script type="text/plain" title="Hauptprogramm.java">
// Gabeln erstellen
Gabel[] gabeln = new Gabel[5];
for (int i = 0; i < 5; i++) {
    gabeln[i] = new Gabel(i);
}

// Philosophen erstellen und starten
Philosoph[] philosophen = new Philosoph[5];
for (int i = 0; i < 5; i++) {
    philosophen[i] = new Philosoph(i, gabeln[i], gabeln[(i + 1) % 5]);
    philosophen[i].start();
}

System.out.println("Alle Philosophen gestartet - beobachte mÃ¶glichen Deadlock!");
            </script>
             <script type="text/plain" title="Gabel.java">
class Gabel {
   private boolean verfuegbar = true;
   private int nummer;

   public Gabel(int nummer) {
      this.nummer = nummer;
   }

   public synchronized void aufnehmen() {
      while (!verfuegbar) {
         System.out.println("Gabel " + nummer + " ist besetzt, warte...");
         try {
            wait(); // Warten, bis Gabel frei ist   
         } catch(Exception e) {
            System.out.println(e.getMessage());
         }
      }
      verfuegbar = false;
      System.out.println("Gabel " + nummer + " aufgenommen");
   }

   public synchronized void ablegen() {
      verfuegbar = true;
      System.out.println("Gabel " + nummer + " abgelegt");
      notifyAll(); // Wartende Philosophen benachrichtigen
   }
    
   public int getNummer() {
      return nummer;
   }
}
            </script>
            <script type="text/plain" title="Philosoph.java">
class Philosoph extends Thread {
   private int nummer;
   private Gabel linkeGabel;
   private Gabel rechteGabel;

   public Philosoph(int nummer, Gabel links, Gabel rechts) {
      this.nummer = nummer;
      this.linkeGabel = links;
      this.rechteGabel = rechts;
   }

   private void denken() {
      System.out.println("Philosoph " + nummer + " denkt");
      try {
         Thread.sleep((int)(Math.random() * 100));
      } catch(Exception e) {
         System.out.println(e.getMessage());
      }
   }

   private void essen() {
      System.out.println("Philosoph " + nummer + " isst");
      try { 
         Thread.sleep((int)(Math.random() * 100));
      } catch(Exception e) {
         System.out.println(e.getMessage());
      }
   }

   @Override
   public void run() {
      try {
         for (int i = 0; i < 3; i++) {
            denken();
                
            // DEADLOCK-GEFAHR: Alle nehmen erst linke Gabel
            System.out.println("Philosoph " + nummer + " versucht linke Gabel " + linkeGabel.getNummer() + " aufzunehmen");
            linkeGabel.aufnehmen();
                
            System.out.println("Philosoph " + nummer + " versucht rechte Gabel " + rechteGabel.getNummer() + " aufzunehmen");
            rechteGabel.aufnehmen();
                
            essen();
                
            // Gabeln ablegen
            linkeGabel.ablegen();
            rechteGabel.ablegen();
         }
         System.out.println("Philosoph " + nummer + " ist fertig!");
      } catch(Exception e) {
         System.out.println("Philosoph " + nummer + " wurde unterbrochen");
      }
   }
}
            </script>
        </div>
    </div>

    <div class="task-box" style="margin-top: 2rem;">
        <h4>ğŸ“ ArbeitsauftrÃ¤ge - Teil 2: LÃ¶sung implementieren</h4>
        <ol start="4">
            <li><strong>Analyze:</strong> Welche LÃ¶sungsansÃ¤tze gibt es fÃ¼r das Deadlock-Problem?</li>
            <li><strong>Make:</strong> Implementiere eine der folgenden LÃ¶sungen:
                <ul>
                    <li><strong>LÃ¶sung 1:</strong> Asymmetrische LÃ¶sung - Ein Philosoph greift erst die rechte Gabel</li>
                    <li><strong>LÃ¶sung 2:</strong> Maximal 4 Philosophen gleichzeitig am Tisch (Semaphor)</li>
                    <li><strong>LÃ¶sung 3:</strong> Beide Gabeln atomar (gleichzeitig) aufnehmen</li>
                </ul>
            </li>
            <li><strong>Test:</strong> Teste deine LÃ¶sung mehrfach. Tritt noch ein Deadlock auf?</li>
        </ol>
        <button class="btn btn-secondary" onclick="toggleSolution('solution_aufgabe5')">LÃ¶sungsansÃ¤tze anzeigen</button>
    </div>

    <div id="solution_aufgabe5" class="solution-box hidden">
        <h4>âœ… LÃ¶sung zu Aufgabe 5 - Speisende Philosophen</h4>
        
        <p><strong>Zu 1-3: Deadlock-Analyse:</strong></p>
        <div class="highlight">
            <p><strong>Warum entsteht der Deadlock?</strong></p>
            <ul>
                <li>Alle 5 Philosophen nehmen gleichzeitig ihre linke Gabel</li>
                <li>Jeder wartet nun auf die rechte Gabel</li>
                <li>Aber die rechte Gabel ist die linke Gabel des Nachbarn!</li>
                <li>â†’ ZirkulÃ¤res Warten: 0â†’1â†’2â†’3â†’4â†’0</li>
            </ul>

            <p><strong>Bedingungen fÃ¼r Deadlock (alle 4 mÃ¼ssen erfÃ¼llt sein):</strong></p>
            <ol>
                <li><strong>Mutual Exclusion:</strong> Ressource kann nur von einem Prozess genutzt werden</li>
                <li><strong>Hold and Wait:</strong> Prozess hÃ¤lt Ressource und wartet auf weitere</li>
                <li><strong>No Preemption:</strong> Ressource kann nicht entzogen werden</li>
                <li><strong>Circular Wait:</strong> ZirkulÃ¤re Wartekette</li>
            </ol>
        </div>

        <p><strong>Zu 4-6: LÃ¶sungsansÃ¤tze:</strong></p>

        <div class="highlight">
            <p><strong>LÃ¶sung 1: Asymmetrische LÃ¶sung (einfachste!)</strong></p>
            <p>Ein Philosoph (z.B. der letzte) greift die Gabeln in umgekehrter Reihenfolge:</p>
            <pre>
// In Philosoph.java, in der run()-Methode:
if (nummer == 4) {
    // Philosoph 4 nimmt erst rechte, dann linke Gabel
    rechteGabel.aufnehmen();
    linkeGabel.aufnehmen();
} else {
    // Alle anderen: erst links, dann rechts
    linkeGabel.aufnehmen();
    rechteGabel.aufnehmen();
}
            </pre>
            <p>â†’ Bricht die zirkulÃ¤re Wartekette!</p>
        </div>

        <div class="highlight">
            <p><strong>LÃ¶sung 2: Maximal 4 Philosophen am Tisch</strong></p>
            <p>Verwende einen Semaphor, der maximal 4 Philosophen gleichzeitig zulÃ¤sst:</p>
            <pre>
// Neue Klasse oder in Hauptprogramm:
class TischSemaphor {
    private int plaetze = 4;
    
    public synchronized void betreten()  {
        while (plaetze == 0) {
            wait();
        }
        plaetze--;
        System.out.println("Philosoph betritt Tisch, " + plaetze + " PlÃ¤tze frei");
    }
    
    public synchronized void verlassen() {
        plaetze++;
        System.out.println("Philosoph verlÃ¤sst Tisch, " + plaetze + " PlÃ¤tze frei");
        notifyAll();
    }
}

// In Philosoph.run():
tischSemaphor.betreten();
// ... essen ...
tischSemaphor.verlassen();
            </pre>
            <p>â†’ Mindestens ein Philosoph kann immer beide Gabeln nehmen!</p>
        </div>

        <div class="highlight">
            <p><strong>LÃ¶sung 3: Beide Gabeln atomar aufnehmen</strong></p>
            <p>Verwende ein gemeinsames Lock-Objekt fÃ¼r beide Gabeln:</p>
            <pre>
// Neue Methode in einer Manager-Klasse:
class GabelManager {
    public synchronized void nimmBeideGabeln(Gabel links, Gabel rechts) 
             {
        links.aufnehmen();
        rechts.aufnehmen();
    }
    
    public synchronized void legeBeideGabelnAb(Gabel links, Gabel rechts) {
        links.ablegen();
        rechts.ablegen();
    }
}

// In Philosoph.run():
gabelManager.nimmBeideGabeln(linkeGabel, rechteGabel);
essen();
gabelManager.legeBeideGabelnAb(linkeGabel, rechteGabel);
            </pre>
            <p>â†’ Verhindert Hold-and-Wait!</p>
        </div>

        <p><strong>Empfehlung:</strong></p>
        <p class="highlight">Die <strong>asymmetrische LÃ¶sung</strong> ist am einfachsten zu implementieren und sehr effektiv. Sie bricht die zirkulÃ¤re Wartekette, indem ein Philosoph die Reihenfolge Ã¤ndert.</p>
    </div>

    <!-- Strategien zur Konfliktvermeidung -->
    <div class="strategy-grid" style="margin-top: 3rem;">
        <h3>ğŸ“Š Strategien zur Vermeidung bzw. LÃ¶sung von Konflikten</h3>
        
        <div class="strategy-card">
            <h4>Wechselseitiger Ausschluss (exklusiv)</h4>
            <ul>
                <li><strong>Monitor</strong> (engl. to monitor = Ã¼berwachen)</li>
                <li><strong>Kritische Abschnitte</strong> (Critical Section)</li>
                <li>Konfliktmanagement</li>
                <li>Prozesskommunikation</li>
            </ul>
        </div>

        <div class="strategy-card">
            <h4>Zeitliche Synchronisation (inklusiv)</h4>
            <ul>
                <li><strong>Meeting Room</strong></li>
                <li><strong>Barriere</strong> (Barrier)</li>
                <li>Gegenseitige Abstimmung (z.B. Warten)</li>
            </ul>
        </div>
    </div>

    <!-- Best Practices -->
    <div class="best-practices" style="margin-top: 3rem;">
        <h3>âœ… Best Practices fÃ¼r Thread-Programmierung</h3>
        
        <div class="practice">
            <span class="icon">1ï¸âƒ£</span>
            <div>
                <strong>Minimiere kritische Abschnitte</strong>
                <p>Halte synchronized-BlÃ¶cke so kurz wie mÃ¶glich</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">2ï¸âƒ£</span>
            <div>
                <strong>Vermeide Deadlocks</strong>
                <p>Definiere eine feste Reihenfolge fÃ¼r das Sperren von Ressourcen</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">3ï¸âƒ£</span>
            <div>
                <strong>Nutze hÃ¶here Abstraktionen</strong>
                <p>Verwende java.util.concurrent (ExecutorService, CountDownLatch, etc.)</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">4ï¸âƒ£</span>
            <div>
                <strong>Teste grÃ¼ndlich</strong>
                <p>Thread-Probleme sind oft schwer reproduzierbar</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">5ï¸âƒ£</span>
            <div>
                <strong>Dokumentiere Thread-Safety</strong>
                <p>Markiere Klassen und Methoden klar als thread-safe oder nicht</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">6ï¸âƒ£</span>
            <div>
                <strong>Verwende while statt if bei wait()</strong>
                <p>PrÃ¼fe Bedingungen nach dem Aufwachen erneut (Spurious Wakeups!)</p>
            </div>
        </div>

        <div class="practice">
            <span class="icon">7ï¸âƒ£</span>
            <div>
                <strong>Bevorzuge notifyAll() Ã¼ber notify()</strong>
                <p>Sicherer bei mehreren wartenden Threads unterschiedlicher Typen</p>
            </div>
        </div>
    </div>

    <!-- Zusammenfassung -->
    <div class="concept-box" style="margin-top: 3rem;">
        <h3>ğŸ“š Zusammenfassung: NebenlÃ¤ufigkeit in Java</h3>
        
        <div class="key-points">
            <div class="key-point">
                <span class="number">1</span>
                <div>
                    <strong>Thread-Erstellung</strong>
                    <p>Zwei Wege: extends Thread oder implements Runnable. Starten mit start(), nicht run()!</p>
                </div>
            </div>
            
            <div class="key-point">
                <span class="number">2</span>
                <div>
                    <strong>Race Conditions</strong>
                    <p>Gleichzeitiger Zugriff auf gemeinsame Ressourcen fÃ¼hrt zu Inkonsistenzen. LÃ¶sung: synchronized</p>
                </div>
            </div>
            
            <div class="key-point">
                <span class="number">3</span>
                <div>
                    <strong>Monitore und Semaphore</strong>
                    <p>synchronized bindet an Objekte. Verschiedene Objekte = verschiedene Monitore!</p>
                </div>
            </div>
            
            <div class="key-point">
                <span class="number">4</span>
                <div>
                    <strong>wait() und notify()</strong>
                    <p>Effiziente Synchronisation ohne Busy Waiting. Immer mit while-Schleife verwenden!</p>
                </div>
            </div>
            
            <div class="key-point">
                <span class="number">5</span>
                <div>
                    <strong>Deadlock-Vermeidung</strong>
                    <p>ZirkulÃ¤re Warteketten vermeiden durch: Reihenfolge, Begrenzung oder atomare Operationen</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="navigation-buttons">
        <button class="btn btn-outline" onclick="navigateToChapter(4)">â† ZurÃ¼ck</button>
        <button class="btn btn-success" onclick="showCompletion()">AbschlieÃŸen âœ“</button>
    </div>
</section>


            <!-- Completion Modal -->
            <div id="completionModal" class="modal hidden">
                <div class="modal-content">
                    <h2>ğŸ‰ GlÃ¼ckwunsch!</h2>
                    <p>Du hast den Lernpfad erfolgreich abgeschlossen!</p>
                    <h3>Was du gelernt hast:</h3>
                    <ul>
                        <li>âœ… Grundbegriffe der NebenlÃ¤ufigkeit</li>
                        <li>âœ… Synchronisation und Konfliktmanagement</li>
                        <li>âœ… Tasks und Threads</li>
                        <li>âœ… Praktische Umsetzung in Java</li>
                        <li>âœ… Klassische Probleme (Producer-Consumer, Philosophen)</li>
                    </ul>
                    <div class="modal-buttons">
                        <button class="btn btn-primary" onclick="hideCompletion()">Zum Anfang</button>
                        <button class="btn btn-outline" onclick="hideCompletion()">SchlieÃŸen</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Lernpfad: Parallele Prozesse | Informatik Oberstufe</p>
            <p>Basierend auf Materialien fÃ¼r die 12. Klasse</p>
            <p><a href="https://edu-mrh.de/contribute.html#impressum" target="_blank" rel="noopener noreferrer" class="footer-link">ğŸ“‹ Impressum</a></p>
        </div>
    </footer>
    <script src="script.js"></script>
</body>
</html>
