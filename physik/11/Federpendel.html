<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federpendel - Physik - edu-mrh.de</title>
    <meta name="description" content="Interaktives Versuchsprotokoll zum Federpendel mit Simulation, Messreihen und Auswertung f√ºr den Physikunterricht G9 Bayern">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://edu-mrh.de/embed/icons/favicon.png">
    
    <!-- CSS Framework -->
    <link rel="stylesheet" href="https://edu-mrh.de/embed/style.css">
    
    <!-- Chart.js f√ºr Diagramme -->
    <script defer src="https://edu-mrh.de/embed/charts.js"></script>
    
    <!-- JavaScript Framework -->
    <script defer src="https://edu-mrh.de/embed/script.js"></script>
    
    <style>
        /* Zus√§tzliche spezifische Styles f√ºr das Federpendel-Protokoll */
        .header-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .header-grid label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--dark);
        }
        
        .sim-container {
            display: flex;
            gap: var(--spacing-2xl);
            align-items: center;
            background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f7 100%);
            padding: var(--spacing-2xl);
            border-radius: var(--radius-md);
            margin: var(--spacing-xl) 0;
        }
        
        .sim-canvas-wrapper {
            flex-shrink: 0;
        }
        
        #simCanvas {
            background: var(--white);
            border: 2px solid var(--gray-light);
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
        }
        
        .watch-box {
            flex: 1;
            text-align: center;
        }
        
        .stopwatch-display {
            font-size: 2.5rem;
            font-family: var(--font-family-mono);
            background: var(--dark);
            color: var(--white);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
            font-weight: 700;
            letter-spacing: 2px;
        }
        
        .watch-controls {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .controls-area {
            text-align: left;
            background: var(--white);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .controls-area label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--dark);
        }
        
        .controls-area input[type="range"] {
            width: 100%;
            margin-bottom: var(--spacing-lg);
        }
        
        .controls-area span {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-xl) 0;
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .data-table thead {
            background: var(--primary-color);
            color: var(--white);
        }
        
        .data-table th,
        .data-table td {
            border: 1px solid var(--gray-light);
            padding: var(--spacing-md);
            text-align: center;
        }
        
        .data-table th {
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .data-table tbody tr:hover {
            background: var(--gray-lighter);
        }
        
        .data-table input[type="number"] {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            text-align: center;
            font-size: 0.95rem;
        }
        
        .data-table input[type="number"]:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        
        .data-table .res-T {
            font-weight: 600;
            color: var(--primary-color);
            font-family: var(--font-family-mono);
        }
        
        .instruction-text {
            background: linear-gradient(135deg, #fff3cd 0%, #ffe69c 100%);
            padding: var(--spacing-lg);
            border-left: 5px solid var(--warning-color);
            margin: var(--spacing-xl) 0;
            font-weight: 600;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .axis-controls {
            display: flex;
            gap: var(--spacing-lg);
            align-items: center;
            background: var(--gray-lighter);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            margin: var(--spacing-lg) 0;
            flex-wrap: wrap;
        }
        
        .axis-controls label {
            font-weight: 600;
            color: var(--dark);
        }
        
        .axis-controls select {
            width: 150px;
            padding: var(--spacing-sm);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            background: var(--white);
        }
        
        .chart-container {
            height: 400px;
            margin-top: var(--spacing-xl);
            background: var(--white);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .prop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }
        
        .prop-item {
            background: var(--gray-lighter);
            padding: var(--spacing-md);
            border: 2px solid var(--gray-light);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .prop-item:hover {
            background: var(--white);
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .prop-item input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }
        
        .prop-item label {
            cursor: pointer;
            margin: 0;
            font-weight: 500;
        }
        
        .feedback {
            margin-top: var(--spacing-lg);
            font-weight: 700;
            font-size: 1.1rem;
            min-height: 1.5em;
            padding: var(--spacing-md);
            border-radius: var(--radius);
            text-align: center;
        }
        
        .feedback.success {
            background: #d1fae5;
            color: var(--success-dark);
        }
        
        .feedback.error {
            background: #fee2e2;
            color: var(--danger-dark);
        }
        
        textarea {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius);
            font-family: var(--font-family-base);
            font-size: 0.95rem;
            line-height: 1.6;
            resize: vertical;
            transition: var(--transition-fast);
        }
        
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        input[type="text"],
        input[type="date"] {
            width: 100%;
            padding: var(--spacing-sm);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            transition: var(--transition-fast);
        }
        
        input[type="text"]:focus,
        input[type="date"]:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: var(--gray-light);
            border-radius: var(--radius-full);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition-fast);
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: var(--transition-fast);
        }
        
        input[type="range"]::-moz-range-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.2);
        }
        
        @media (max-width: 768px) {
            .header-grid {
                grid-template-columns: 1fr;
            }
            
            .sim-container {
                flex-direction: column;
                gap: var(--spacing-xl);
            }
            
            .axis-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .axis-controls select {
                width: 100%;
            }
            
            .prop-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 300px;
            }
            
            .stopwatch-display {
                font-size: 2rem;
            }
        }
        
        @media print {
            .no-print,
            .btn,
            .axis-controls,
            .controls-area,
            .watch-controls {
                display: none !important;
            }
            
            body {
                background: white;
                margin: 0;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid var(--gray-light);
                break-inside: avoid;
                page-break-inside: avoid;
            }
            
            .sim-container {
                background: white;
                border: 1px solid var(--gray-light);
            }
        }
    </style>
</head>
<body>
<!--
Fachbereich: Physik
Jahrgangsstufe: 9
Thema: Federpendel - Versuchsprotokoll
Erstellt: 2026-02-26
Version: 1.0
-->

<nav class="navbar">
    <div class="container">
        <div class="nav-brand">
            <span class="icon"></span><a href="https://edu-mrh.de/">‚öõÔ∏è</a></span>
            <span>Federpendel</span>
        </div>
        <div class="nav-links">
            <a href="https://edu-mrh.de/physik/physik.html#jahrgang-9" class="btn btn-outline">√úbersicht</a>
            <a href="https://edu-mrh.de/contribute.html#impressum" class="btn btn-outline">Impressum</a>
        </div>
    </div>
</nav>

<div class="main-content" style="margin-left: 0;">
    <div class="container">
        
        <div class="card">
            <div class="chapter-header">
                <span class="chapter-number">Physik G9</span>
                <h1>Versuchsprotokoll: Federpendel</h1>
            </div>
            
            <div class="header-grid">
                <div>
                    <label>Name(n):</label>
                    <input type="text" placeholder="Dein Name">
                </div>
                <div>
                    <label>Datum:</label>
                    <input type="date">
                </div>
            </div>
        </div>

        <div class="card">
            <h2>1. Hypothesen</h2>
            
            <div style="margin-bottom: var(--spacing-xl);">
                <label style="display: block; font-weight: 600; margin-bottom: var(--spacing-sm);">
                    Hypothese zur Abh√§ngigkeit der Schwingungsdauer <i>T</i> von der Masse <i>m</i>:
                </label>
                <textarea rows="3" placeholder="Formuliere deine Hypothese..."></textarea>
            </div>
            
            <div>
                <label style="display: block; font-weight: 600; margin-bottom: var(--spacing-sm);">
                    Hypothese zur Abh√§ngigkeit der Schwingungsdauer <i>T</i> von der Federh√§rte <i>D</i>:
                </label>
                <textarea rows="3" placeholder="Formuliere deine Hypothese..."></textarea>
            </div>
        </div>

                <div class="card no-print">
            <h2>2. Simulation & Manuelle Stoppuhr</h2>
            <div class="sim-container">
                <div class="sim-canvas-wrapper">
                    <canvas id="simCanvas" width="200" height="350"></canvas>
                </div>
                <div class="watch-box">
                    <div class="stopwatch-display" id="watch">0.00 s</div>
                    <div class="watch-controls">
                        <button class="btn btn-success" onclick="startWatch()">‚ñ∂ Start</button>
                        <button class="btn btn-warning" onclick="stopWatch()">‚è∏ Stop</button>
                        <button class="btn" style="background: #7f8c8d; color: white;" onclick="resetWatch()">‚Ü∫ Reset</button>
                    </div>
                    <div class="controls-area">
                        <label>Eingestellte Masse <b>m</b>: <span id="mDisp">0.50</span> kg</label>
                        <input type="range" id="mRange" min="0.1" max="2.0" step="0.1" value="0.5" oninput="updateSimParams()">
                        <label>Eingestellte Federh√§rte <b>D</b>: <span id="dDisp">15</span> N/m</label>
                        <input type="range" id="dRange" min="5" max="50" step="1" value="15" oninput="updateSimParams()">
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>3. Messreihe 1: Variation der Masse (D = konst.)</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Masse m (kg)</th>
                        <th>Zeit t f√ºr 10 Schwingungen (s)</th>
                        <th>Periodendauer T (s)</th>
                    </tr>
                </thead>
                <tbody id="table1">
                    <tr>
                        <td><input type="number" step="0.01" class="m-val"></td>
                        <td><input type="number" step="0.01" class="t-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.01" class="m-val"></td>
                        <td><input type="number" step="0.01" class="t-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.01" class="m-val"></td>
                        <td><input type="number" step="0.01" class="t-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.01" class="m-val"></td>
                        <td><input type="number" step="0.01" class="t-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.01" class="m-val"></td>
                        <td><input type="number" step="0.01" class="t-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="instruction-text">
                üí° Untersuche bei welchen Wahlm√∂glichkeiten f√ºr die x- und y-Achse das Diagramm einen direkt proportionalen Zusammenhang darstellt.
            </div>

            <div class="axis-controls no-print">
                <label>X-Achse:</label>
                <select id="x1">
                    <option value="m">m</option>
                    <option value="m2">m¬≤</option>
                    <option value="m_sqrt">‚àöm</option>
                    <option value="m_inv">1/m</option>
                </select>
                <label>Y-Achse:</label>
                <select id="y1">
                    <option value="T">T</option>
                    <option value="T2">T¬≤</option>
                    <option value="T_inv">1/T</option>
                </select>
                <button class="btn btn-primary" onclick="renderChart1()">üìä Diagramm 1 aktualisieren</button>
            </div>
            <div class="chart-container">
                <canvas id="chart1"></canvas>
            </div>
        </div>

        <div class="card">
            <h2>4. Messreihe 2: Variation der Federh√§rte (m = konst.)</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Federh√§rte D (N/m)</th>
                        <th>Zeit t f√ºr 10 Schwingungen (s)</th>
                        <th>Periodendauer T (s)</th>
                    </tr>
                </thead>
                <tbody id="table2">
                    <tr>
                        <td><input type="number" step="0.1" class="D-val"></td>
                        <td><input type="number" step="0.01" class="t2-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.1" class="D-val"></td>
                        <td><input type="number" step="0.01" class="t2-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.1" class="D-val"></td>
                        <td><input type="number" step="0.01" class="t2-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.1" class="D-val"></td>
                        <td><input type="number" step="0.01" class="t2-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                    <tr>
                        <td><input type="number" step="0.1" class="D-val"></td>
                        <td><input type="number" step="0.01" class="t2-val" oninput="calcT(this)"></td>
                        <td class="res-T">-</td>
                    </tr>
                </tbody>
            </table>

            <div class="instruction-text">
                üí° Untersuche bei welchen Wahlm√∂glichkeiten f√ºr die x- und y-Achse das Diagramm einen direkt proportionalen Zusammenhang darstellt.
            </div>

            <div class="axis-controls no-print">
                <label>X-Achse:</label>
                <select id="x2">
                    <option value="D">D</option>
                    <option value="D_inv">1/D</option>
                    <option value="D_sqrt">‚àöD</option>
                    <option value="D2">D¬≤</option>
                </select>
                <label>Y-Achse:</label>
                <select id="y2">
                    <option value="T2">T¬≤</option>
                    <option value="T">T</option>
                    <option value="T_inv">1/T</option>
                </select>
                <button class="btn btn-primary" onclick="renderChart2()">üìä Diagramm 2 aktualisieren</button>
            </div>
            <div class="chart-container">
                <canvas id="chart2"></canvas>
            </div>
        </div>

        <div class="card">
            <h2>5. Auswertung & Mathematisierung</h2>
            <p>W√§hle basierend auf deinen Graphen die korrekten Proportionalit√§ten aus:</p>
            
            <h3>Zusammenhang mit der Masse m</h3>
            <div class="prop-grid">
                <div class="prop-item">
                    <input type="checkbox" id="prop1">
                    <label for="prop1">T ~ m</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop2" data-correct="true">
                    <label for="prop2">T¬≤ ~ m</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop3" data-correct="true">
                    <label for="prop3">T ~ ‚àöm</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop4">
                    <label for="prop4">T¬≤ ~ 1/m</label>
                </div>
            </div>
            
            <h3>Zusammenhang mit der Federh√§rte D</h3>
            <div class="prop-grid">
                <div class="prop-item">
                    <input type="checkbox" id="prop5">
                    <label for="prop5">T¬≤ ~ D</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop6" data-correct="true">
                    <label for="prop6">T¬≤ ~ 1/D</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop7">
                    <label for="prop7">T ~ D</label>
                </div>
                <div class="prop-item">
                    <input type="checkbox" id="prop8" data-correct="true">
                    <label for="prop8">T ~ 1/‚àöD</label>
                </div>
            </div>
            
            <button class="btn btn-warning" onclick="checkCorrect()">‚úì Auswahl pr√ºfen</button>
            <div id="fb" class="feedback"></div>
            
            <div style="margin-top: var(--spacing-xl);">
                <label style="display: block; font-weight: 600; margin-bottom: var(--spacing-sm);">
                    Herleitung der finalen Formel f√ºr T:
                </label>
                <textarea rows="4" placeholder="Leite die Formel f√ºr die Periodendauer T her..."></textarea>
            </div>
        </div>

        <div class="card">
            <h2>6. Messunsicherheiten und Fehlerbetrachtung</h2>
            <p>Reflektiere kritisch √ºber die Genauigkeit deiner Messungen und f√ºhre eine fundierte Fehlerbetrachtung durch. Gehe dabei auf folgende Punkte ein:</p>
            <ul>
                <li>Identifiziere m√∂gliche Ursachen f√ºr Messunsicherheiten.</li>
                <li>Erl√§utere Ma√ünahmen zur Minimierung dieser Einfl√ºsse, die du bereits angewandt hast oder noch anwenden k√∂nntest.</li>
            </ul>
            <textarea rows="6" placeholder="Deine Fehlerbetrachtung..."></textarea>
        </div>

        <button class="btn btn-danger no-print" style="width: 100%; font-size: 1.2rem; margin-top: var(--spacing-2xl);" onclick="window.print()">üìÑ Als PDF exportieren</button>

    </div>
</div>

<script>
    let startTime, timerInterval, running = false;
    
    function startWatch() {
        if (!running) {
            startTime = Date.now() - (parseFloat(document.getElementById("watch").innerText) * 1000 || 0);
            timerInterval = setInterval(() => {
                document.getElementById("watch").innerText = ((Date.now() - startTime) / 1000).toFixed(2) + " s";
            }, 10);
            running = true;
        }
    }
    
    function stopWatch() {
        clearInterval(timerInterval);
        running = false;
    }
    
    function resetWatch() {
        stopWatch();
        document.getElementById("watch").innerText = "0.00 s";
    }

    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');
    let m = 0.5, D = 15;
    
    function updateSimParams() {
        m = parseFloat(document.getElementById('mRange').value);
        D = parseFloat(document.getElementById('dRange').value);
        document.getElementById('mDisp').innerText = m.toFixed(2);
        document.getElementById('dDisp').innerText = D;
    }
    
    function draw() {
        ctx.clearRect(0, 0, 200, 350);
        let omega = Math.sqrt(D / m);
        let y = 150 + 70 * Math.sin(omega * (Date.now() / 1000));
        
        ctx.beginPath();
        ctx.moveTo(100, 20);
        for (let i = 0; i <= 20; i++) {
            ctx.lineTo(100 + (i % 2 == 0 ? 15 : -15), 20 + (y - 40) / 20 * i);
        }
        ctx.strokeStyle = "#34495e";
        ctx.lineWidth = 2;
        ctx.stroke();
        
        ctx.fillStyle = "#e67e22";
        ctx.fillRect(75, y, 50, 30);
        
        requestAnimationFrame(draw);
    }
    
    draw();

    function calcT(el) {
        let row = el.closest('tr');
        let t10 = parseFloat(el.value);
        if (t10) {
            row.querySelector('.res-T').innerText = (t10 / 10).toFixed(3);
        }
    }

    let c1, c2;
    
    function renderChart1() {
        let xKey = document.getElementById('x1').value;
        let yKey = document.getElementById('y1').value;
        let data = [{x: 0, y: 0}];
        
        Array.from(document.querySelectorAll('#table1 tr')).forEach(tr => {
            let mv = parseFloat(tr.querySelector('.m-val').value);
            let Tv = parseFloat(tr.querySelector('.res-T').innerText);
            if (!isNaN(mv) && !isNaN(Tv)) {
                let x = (xKey === 'm') ? mv : (xKey === 'm2') ? mv * mv : (xKey === 'm_sqrt') ? Math.sqrt(mv) : 1 / mv;
                let y = (yKey === 'T') ? Tv : (yKey === 'T2') ? Tv * Tv : 1 / Tv;
                data.push({x, y});
            }
        });
        
        if (c1) c1.destroy();
        c1 = new Chart(document.getElementById('chart1'), {
                        type: 'scatter',
            data: {
                datasets: [{
                    label: 'Messreihe 1 (inkl. 0|0)',
                    data: data,
                    backgroundColor: '#3498db',
                    borderColor: '#3498db',
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: xKey,
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: '#e0e0e0'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: yKey,
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: '#e0e0e0'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                }
            }
        });
    }

    function renderChart2() {
        let xKey = document.getElementById('x2').value;
        let yKey = document.getElementById('y2').value;
        let data = [{x: 0, y: 0}];
        
        Array.from(document.querySelectorAll('#table2 tr')).forEach(tr => {
            let Dv = parseFloat(tr.querySelector('.D-val').value);
            let Tv = parseFloat(tr.querySelector('.res-T').innerText);
            if (!isNaN(Dv) && !isNaN(Tv)) {
                let x = (xKey === 'D') ? Dv : (xKey === 'D_inv') ? 1 / Dv : (xKey === 'D_sqrt') ? Math.sqrt(Dv) : Dv * Dv;
                let y = (yKey === 'T2') ? Tv * Tv : (yKey === 'T') ? Tv : 1 / Tv;
                data.push({x, y});
            }
        });
        
        if (c2) c2.destroy();
        c2 = new Chart(document.getElementById('chart2'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Messreihe 2 (inkl. 0|0)',
                    data: data,
                    backgroundColor: '#e74c3c',
                    borderColor: '#e74c3c',
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: xKey,
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: '#e0e0e0'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: yKey,
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: '#e0e0e0'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                }
            }
        });
    }

    function checkCorrect() {
        let ok = true;
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            if ((cb.checked && !cb.getAttribute('data-correct')) || (!cb.checked && cb.getAttribute('data-correct'))) {
                ok = false;
            }
        });
        
        let fb = document.getElementById('fb');
        if (ok) {
            fb.innerText = "‚úÖ Richtig! Alle Proportionalit√§ten korrekt erkannt.";
            fb.className = "feedback success";
        } else {
            fb.innerText = "‚ùå Nicht ganz korrekt. √úberpr√ºfe deine Auswahl anhand der Diagramme.";
            fb.className = "feedback error";
        }
    }
</script>

</body>
</html>

